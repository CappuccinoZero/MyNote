<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.0 (458672)"/><meta name="author" content="林"/><meta name="created" content="2019-09-27 15:36:47 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-09-28 03:29:05 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>TCP 三次握手</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><div style="line-height: 160%; box-sizing: content-box;"><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">简要概述三次握手过程
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">TCP握手中一些参数的含义
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">带有参数的三次握手报文
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">带有参数的四次挥手报文
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">HTTPS与HTTP
</a></li></ul></li></ul></div><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">简要概述三次握手过程</h1>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">客户端向服务器发送信息，服务器可以确认客户端的发信能力和服务器的接信能力</li>
<li style="line-height: 160%; box-sizing: content-box;">服务器向服务器发送信息，客户端可以确认服务器的发信能力和接信能力，以及客户端的发信能力与接信能力</li>
<li style="line-height: 160%; box-sizing: content-box;">客户端向服务器发送信息，服务器可以确认服务器的发信能力和客户端的接信能力</li>
</ol>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">TCP握手中一些参数的含义</h1>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">ASK 响应标识，建立连接后，所有ASK值都为1<br/>
SYN 连接标识，请求连接和连接接受报文为1，其他都为0<br/>
FIN 关闭连接标识，关闭连接和接受关闭报纸文为1，其他为0<br/>
seq 序号，请求报文会有该标识，其他没有<br/>
ask 响应序号，除了连接报文没有，其他都没有</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="TCP%20%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.resources/B3842E56-C1FB-4C50-A7BD-986640C38851.jpg" height="714" width="640"/></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">带有参数的三次握手报文</h2>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">客户端发送：设置SYN为1，并且置seq为随机数x，此时客户端为SYN_SEND状态</li>
<li style="line-height: 160%; box-sizing: content-box;">服务器发送：设置SYN为1，并且置seq为随机数y，设置ASK，ask为x+1，此时服务器为SYN_RECV状态</li>
<li style="line-height: 160%; box-sizing: content-box;">客户端发送：设置ask为y+1。次数客户端和服务器都为ESTABLISHED状态<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">连接建立</strong></li>
</ol>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">带有参数的四次挥手报文</h2>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">主机1发送：设置FIN为1，设置seq，设置ask，主机1进入FIN_WAIT_1</li>
<li style="line-height: 160%; box-sizing: content-box;">主机2发送：设置ask为sqe+1,主机2进入CLOSE_WAIT状态，主机1进入FIN_WAIT_2状态</li>
<li style="line-height: 160%; box-sizing: content-box;">主机2发送：设置FIN为1，设置seq，主机2进入LAST_WAIT状态之后关闭连接</li>
<li style="line-height: 160%; box-sizing: content-box;">主机1发送：设置ask为seq+1，主机1进入TIME_WAIT状态，过一段时间后没有响应主机1关闭连接</li>
</ol>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">HTTPS与HTTP</h2>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">HTTPS需要到CA申请证书，并且通常都需要一定费用</li>
<li style="line-height: 160%; box-sizing: content-box;">HTTP是超文本传输协议，采用明文传输，HTTPS采用SSL加密传输协议，更安全。</li>
<li style="line-height: 160%; box-sizing: content-box;">HTTPS端口号是443，HTTP端口号是80</li>
<li style="line-height: 160%; box-sizing: content-box;">HTTP的连接是无状态的，HTTPS采用HTTP+SSL构建加密传输和身份认证的网络协议。</li>
<li style="line-height: 160%; box-sizing: content-box;">HTTP建立连接过程比HTTPS更快，HTTPS除了TCP的三次握手，还需要SSL的四次握手。建立连接后的数据传输，二者无差异。</li>
</ol>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%5BTOC%5D%0A%23%20%E7%AE%80%E8%A6%81%E6%A6%82%E8%BF%B0%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B%0A%0A1.%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%A1%AE%E8%AE%A4%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E5%8F%91%E4%BF%A1%E8%83%BD%E5%8A%9B%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%8E%A5%E4%BF%A1%E8%83%BD%E5%8A%9B%0A2.%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%AF%E4%BB%A5%E7%A1%AE%E8%AE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%8F%91%E4%BF%A1%E8%83%BD%E5%8A%9B%E5%92%8C%E6%8E%A5%E4%BF%A1%E8%83%BD%E5%8A%9B%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E5%8F%91%E4%BF%A1%E8%83%BD%E5%8A%9B%E4%B8%8E%E6%8E%A5%E4%BF%A1%E8%83%BD%E5%8A%9B%0A3.%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%A1%AE%E8%AE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%8F%91%E4%BF%A1%E8%83%BD%E5%8A%9B%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E6%8E%A5%E4%BF%A1%E8%83%BD%E5%8A%9B%0A%0A%23%20TCP%E6%8F%A1%E6%89%8B%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0%E7%9A%84%E5%90%AB%E4%B9%89%0AASK%20%E5%93%8D%E5%BA%94%E6%A0%87%E8%AF%86%EF%BC%8C%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E5%90%8E%EF%BC%8C%E6%89%80%E6%9C%89ASK%E5%80%BC%E9%83%BD%E4%B8%BA1%0ASYN%20%E8%BF%9E%E6%8E%A5%E6%A0%87%E8%AF%86%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%BF%9E%E6%8E%A5%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%8E%A5%E5%8F%97%E6%8A%A5%E6%96%87%E4%B8%BA1%EF%BC%8C%E5%85%B6%E4%BB%96%E9%83%BD%E4%B8%BA0%0AFIN%20%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E6%A0%87%E8%AF%86%EF%BC%8C%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%8E%A5%E5%8F%97%E5%85%B3%E9%97%AD%E6%8A%A5%E7%BA%B8%E6%96%87%E4%B8%BA1%EF%BC%8C%E5%85%B6%E4%BB%96%E4%B8%BA0%0Aseq%20%E5%BA%8F%E5%8F%B7%EF%BC%8C%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E4%BC%9A%E6%9C%89%E8%AF%A5%E6%A0%87%E8%AF%86%EF%BC%8C%E5%85%B6%E4%BB%96%E6%B2%A1%E6%9C%89%0Aask%20%E5%93%8D%E5%BA%94%E5%BA%8F%E5%8F%B7%EF%BC%8C%E9%99%A4%E4%BA%86%E8%BF%9E%E6%8E%A5%E6%8A%A5%E6%96%87%E6%B2%A1%E6%9C%89%EF%BC%8C%E5%85%B6%E4%BB%96%E9%83%BD%E6%B2%A1%E6%9C%89%0A%0A!%5B24972f7fe109a0c18125c284f43ec06e.jpeg%5D(evernotecid%3A%2F%2FF51182F9-C91A-4EC7-A031-83FAD430FC37%2Fappyinxiangcom%2F25653467%2FENResource%2Fp21)%0A%0A%23%23%20%E5%B8%A6%E6%9C%89%E5%8F%82%E6%95%B0%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E6%8A%A5%E6%96%87%0A%0A1.%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AESYN%E4%B8%BA1%EF%BC%8C%E5%B9%B6%E4%B8%94%E7%BD%AEseq%E4%B8%BA%E9%9A%8F%E6%9C%BA%E6%95%B0x%EF%BC%8C%E6%AD%A4%E6%97%B6%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%BASYN_SEND%E7%8A%B6%E6%80%81%0A2.%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AESYN%E4%B8%BA1%EF%BC%8C%E5%B9%B6%E4%B8%94%E7%BD%AEseq%E4%B8%BA%E9%9A%8F%E6%9C%BA%E6%95%B0y%EF%BC%8C%E8%AE%BE%E7%BD%AEASK%EF%BC%8Cask%E4%B8%BAx%2B1%EF%BC%8C%E6%AD%A4%E6%97%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%BASYN_RECV%E7%8A%B6%E6%80%81%0A3.%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AEask%E4%B8%BAy%2B1%E3%80%82%E6%AC%A1%E6%95%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%BD%E4%B8%BAESTABLISHED%E7%8A%B6%E6%80%81%0A**%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B**%0A%0A%23%23%20%E5%B8%A6%E6%9C%89%E5%8F%82%E6%95%B0%E7%9A%84%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E6%8A%A5%E6%96%87%0A1.%20%E4%B8%BB%E6%9C%BA1%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AEFIN%E4%B8%BA1%EF%BC%8C%E8%AE%BE%E7%BD%AEseq%EF%BC%8C%E8%AE%BE%E7%BD%AEask%EF%BC%8C%E4%B8%BB%E6%9C%BA1%E8%BF%9B%E5%85%A5FIN_WAIT_1%0A2.%20%E4%B8%BB%E6%9C%BA2%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AEask%E4%B8%BAsqe%2B1%2C%E4%B8%BB%E6%9C%BA2%E8%BF%9B%E5%85%A5CLOSE_WAIT%E7%8A%B6%E6%80%81%EF%BC%8C%E4%B8%BB%E6%9C%BA1%E8%BF%9B%E5%85%A5FIN_WAIT_2%E7%8A%B6%E6%80%81%0A3.%20%E4%B8%BB%E6%9C%BA2%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AEFIN%E4%B8%BA1%EF%BC%8C%E8%AE%BE%E7%BD%AEseq%EF%BC%8C%E4%B8%BB%E6%9C%BA2%E8%BF%9B%E5%85%A5LAST_WAIT%E7%8A%B6%E6%80%81%E4%B9%8B%E5%90%8E%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%0A4.%20%E4%B8%BB%E6%9C%BA1%E5%8F%91%E9%80%81%EF%BC%9A%E8%AE%BE%E7%BD%AEask%E4%B8%BAseq%2B1%EF%BC%8C%E4%B8%BB%E6%9C%BA1%E8%BF%9B%E5%85%A5TIME_WAIT%E7%8A%B6%E6%80%81%EF%BC%8C%E8%BF%87%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%90%8E%E6%B2%A1%E6%9C%89%E5%93%8D%E5%BA%94%E4%B8%BB%E6%9C%BA1%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%0A%0A%23%23%20HTTPS%E4%B8%8EHTTP%0A1.%20HTTPS%E9%9C%80%E8%A6%81%E5%88%B0CA%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%B9%B6%E4%B8%94%E9%80%9A%E5%B8%B8%E9%83%BD%E9%9C%80%E8%A6%81%E4%B8%80%E5%AE%9A%E8%B4%B9%E7%94%A8%0A2.%20HTTP%E6%98%AF%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%8C%E9%87%87%E7%94%A8%E6%98%8E%E6%96%87%E4%BC%A0%E8%BE%93%EF%BC%8CHTTPS%E9%87%87%E7%94%A8SSL%E5%8A%A0%E5%AF%86%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%8C%E6%9B%B4%E5%AE%89%E5%85%A8%E3%80%82%0A3.%20HTTPS%E7%AB%AF%E5%8F%A3%E5%8F%B7%E6%98%AF443%EF%BC%8CHTTP%E7%AB%AF%E5%8F%A3%E5%8F%B7%E6%98%AF80%0A4.%20HTTP%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8CHTTPS%E9%87%87%E7%94%A8HTTP%2BSSL%E6%9E%84%E5%BB%BA%E5%8A%A0%E5%AF%86%E4%BC%A0%E8%BE%93%E5%92%8C%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E3%80%82%0A5.%20HTTP%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B%E6%AF%94HTTPS%E6%9B%B4%E5%BF%AB%EF%BC%8CHTTPS%E9%99%A4%E4%BA%86TCP%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%8C%E8%BF%98%E9%9C%80%E8%A6%81SSL%E7%9A%84%E5%9B%9B%E6%AC%A1%E6%8F%A1%E6%89%8B%E3%80%82%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E5%90%8E%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%EF%BC%8C%E4%BA%8C%E8%80%85%E6%97%A0%E5%B7%AE%E5%BC%82%E3%80%82</center></body></html>