<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.0 (458672)"/><meta name="altitude" content="896.8571166992188"/><meta name="author" content="林"/><meta name="created" content="2019-08-25 09:21:58 +0000"/><meta name="latitude" content="24.41799926757812"/><meta name="longitude" content="98.57328346469727"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-08-25 09:24:09 +0000"/><title>Java IO</title></head><body><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>//time = 3025</div><div>private void copyByInputStream1(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(new File(path1));</div><div>    OutputStream out = new FileOutputStream(new File(path2));</div><div><div><br/></div><div><br/></div></div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = in.read())!= -1){</div><div>        out.write(len);</div><div>    }</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 6</div><div>private void copyByInputStream2(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(new File(path1));</div><div>    OutputStream out = new FileOutputStream(new File(path2));</div><div><div><br/></div><div><br/></div></div><div>    byte[] bt = new byte[1024];</div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = in.read(bt))!= -1){</div><div>        out.write(bt,0,len);</div><div>    }</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 43</div><div>private void copyByBufferStream1(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(new File(path1));</div><div>    OutputStream out = new FileOutputStream(new File(path2));</div><div>    BufferedInputStream bIn = new BufferedInputStream(in);</div><div>    BufferedOutputStream bOu = new BufferedOutputStream(out);</div><div><div><br/></div><div><br/></div></div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = bIn.read())!= -1){</div><div>        bOu.write(len);</div><div>    }</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 4</div><div>private void copyByBufferStream2(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(new File(path1));</div><div>    OutputStream out = new FileOutputStream(new File(path2));</div><div>    BufferedInputStream bIn = new BufferedInputStream(in);</div><div>    BufferedOutputStream bOu = new BufferedOutputStream(out);</div><div><div><br/></div><div><br/></div></div><div>    byte[] bt = new byte[1024];</div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = bIn.read(bt))!= -1){</div><div>        bOu.write(bt,0,len);</div><div>    }</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>// time = 3</div><div>private void copyByChannel(String path1,String path2)throws IOException{</div><div>    FileInputStream in = new FileInputStream(new File(path1));</div><div>    FileOutputStream out = new FileOutputStream(new File(path2));</div><div>    FileChannel inChannel = in.getChannel();</div><div>    FileChannel outChannel = out.getChannel();</div><div>    long start = System.currentTimeMillis();</div><div>    outChannel.transferFrom(inChannel,0,inChannel.size());</div><div>    System.out.println(System.currentTimeMillis() - start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 178</div><div>private void copyByRWer(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    Reader reader = new FileReader(path1);</div><div>    Writer writer = new FileWriter(path2);</div><div><div><br/></div><div><br/></div></div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = reader.read())!= -1){</div><div>        writer.write(len);</div><div>    }</div><div>    writer.flush();</div><div>    writer.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 122</div><div>private void copyByRWer2(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    Reader reader = new FileReader(path1);</div><div>    Writer writer = new FileWriter(path2);</div><div><div><br/></div><div><br/></div></div><div>    int len ;</div><div>    char[] bt = new char[1024];</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = reader.read(bt))!= -1){</div><div>        writer.write(bt,0,len);</div><div>    }</div><div>    writer.flush();</div><div>    writer.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 140</div><div>private void copyByBufferRWer(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    Reader reader = new FileReader(path1);</div><div>    Writer writer = new FileWriter(path2);</div><div>    BufferedReader bfReader = new BufferedReader(reader);</div><div>    BufferedWriter bfWriter = new BufferedWriter(writer);</div><div><div><br/></div><div><br/></div></div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = bfReader.read())!= -1){</div><div>        bfWriter.write(len);</div><div>    }</div><div>    writer.flush();</div><div>    writer.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 110</div><div>private void copyByBufferRWer2(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    Reader reader = new FileReader(path1);</div><div>    Writer writer = new FileWriter(path2);</div><div>    BufferedReader bfReader = new BufferedReader(reader);</div><div>    BufferedWriter bfWriter = new BufferedWriter(writer);</div><div><div><br/></div><div><br/></div></div><div>    char[] bt = new char[1024];</div><div>    int len ;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = bfReader.read(bt))!= -1){</div><div>        bfWriter.write(bt,0,len);</div><div>    }</div><div>    writer.flush();</div><div>    writer.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 247</div><div>private void copyByIORWer1(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(path1);</div><div>    OutputStream out = new FileOutputStream(path2);</div><div>    InputStreamReader inReader = new InputStreamReader(in);</div><div>    OutputStreamWriter outWrite = new OutputStreamWriter(out);</div><div><div><br/></div><div><br/></div></div><div>    int len;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = inReader.read())!= -1){</div><div>        outWrite.write(len);</div><div>    }</div><div>    outWrite.flush();</div><div>    outWrite.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//time = 141</div><div>private void copyByIORWer2(String path1,String path2) throws IOException {</div><div><div><br/></div><div><br/></div></div><div>    InputStream in = new FileInputStream(path1);</div><div>    OutputStream out = new FileOutputStream(path2);</div><div>    InputStreamReader inReader = new InputStreamReader(in);</div><div>    OutputStreamWriter outWrite = new OutputStreamWriter(out);</div><div><div><br/></div><div><br/></div></div><div>    char[] bt = new char[1024];</div><div>    int len;</div><div>    long start = System.currentTimeMillis();</div><div>    while((len = inReader.read(bt))!= -1){</div><div>        outWrite.write(bt,0,len);</div><div>    }</div><div>    outWrite.flush();</div><div>    outWrite.close();</div><div>    System.out.println(System.currentTimeMillis()-start);</div><div>}</div><div><div><br/></div><div><br/></div></div><div>//序列化与反序列化</div><div>private void serializableIO(String path)throws IOException,ClassNotFoundException{</div><div>    File file = new File(path);</div><div>    if(!file.exists())</div><div>        file.createNewFile();</div><div>    InputStream in = new FileInputStream(path);</div><div>    OutputStream out = new FileOutputStream(path);</div><div>    ObjectOutputStream oOut = new ObjectOutputStream(out);</div><div><div><br/></div><div><br/></div></div><div>    Bean bean = new Bean("序列化测试",111);</div><div><div><br/></div><div><br/></div></div><div>    oOut.writeObject(bean);</div><div>    oOut.close();</div><div>    bean = null;</div><div><div><br/></div><div><br/></div></div><div>    ObjectInputStream oIn = new ObjectInputStream(in);</div><div>    bean = (Bean) oIn.readObject();</div><div><div><br/></div><div><br/></div></div><div>    System.out.println("name: "+bean.getName()+"\nage: "+bean.getAge());</div><div>}</div></div><div><br/></div><div>序列化Bean类</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>class Bean(name : String,age : Int) :Serializable{</div><div>    val name = name</div><div>    @Transient val age = age //不需要序列化加上 @Transient 注解</div><div>}</div></div><div><br/></div></body></html>