<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.0 (458672)"/><meta name="author" content="林"/><meta name="created" content="2019-10-17 08:48:34 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-10-20 07:07:17 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>IPC</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">IPC:inter-Process Communication<br/>
进程间通信</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">线程和进程</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">进程是系统调度的最小单位<br/>
线程是有限系统的资源<br/>
一个进程可以包含多个线程，所以进程和线程是包含关系</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">跨进程通信</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Android中跨进程手段有：Binder,Socket,共享文件</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">开启多进程模式</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">android中开启多进程模式唯一手段是在menifest中为四大组件设置</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">android:process，值为进程名，进程名加“:”表示私有进程<br/>
还有特殊手段，通过jni在native层fork一个进程</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">默认的进程名是应用的报名</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">多进程带来的问题</h3>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">静态成员和单例模式完成失效，通常每个应用会单独运行在一个虚拟机中，在不同的虚拟机中调用同一个静态对象会产生不同的拷贝</li>
<li style="line-height: 160%; box-sizing: content-box;">线程同步机制完全失效</li>
<li style="line-height: 160%; box-sizing: content-box;">sharePreference可靠性下降，不同进程读写同一个sharePreference文件会出错，因为系统对sharepreference文件读写有一定的缓存策略，会在内存中备份一个文件的缓存。</li>
<li style="line-height: 160%; box-sizing: content-box;">会创建多个application</li>
</ol>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%0AIPC%3Ainter-Process%20Communication%0A%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%0A%0A%23%23%23%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%0A%E8%BF%9B%E7%A8%8B%E6%98%AF%E7%B3%BB%E7%BB%9F%E8%B0%83%E5%BA%A6%E7%9A%84%E6%9C%80%E5%B0%8F%E5%8D%95%E4%BD%8D%0A%E7%BA%BF%E7%A8%8B%E6%98%AF%E6%9C%89%E9%99%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%B5%84%E6%BA%90%0A%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E5%A4%9A%E4%B8%AA%E7%BA%BF%E7%A8%8B%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%98%AF%E5%8C%85%E5%90%AB%E5%85%B3%E7%B3%BB%0A%0A%23%23%23%20%E8%B7%A8%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%0AAndroid%E4%B8%AD%E8%B7%A8%E8%BF%9B%E7%A8%8B%E6%89%8B%E6%AE%B5%E6%9C%89%EF%BC%9ABinder%2CSocket%2C%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%0A%0A%23%23%23%20%E5%BC%80%E5%90%AF%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%BC%8F%0Aandroid%E4%B8%AD%E5%BC%80%E5%90%AF%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%BC%8F%E5%94%AF%E4%B8%80%E6%89%8B%E6%AE%B5%E6%98%AF%E5%9C%A8menifest%E4%B8%AD%E4%B8%BA%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E8%AE%BE%E7%BD%AE%0A*%20android%3Aprocess%EF%BC%8C%E5%80%BC%E4%B8%BA%E8%BF%9B%E7%A8%8B%E5%90%8D%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%90%8D%E5%8A%A0%E2%80%9C%3A%E2%80%9D%E8%A1%A8%E7%A4%BA%E7%A7%81%E6%9C%89%E8%BF%9B%E7%A8%8B%0A%E8%BF%98%E6%9C%89%E7%89%B9%E6%AE%8A%E6%89%8B%E6%AE%B5%EF%BC%8C%E9%80%9A%E8%BF%87jni%E5%9C%A8native%E5%B1%82fork%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%0A%0A%E9%BB%98%E8%AE%A4%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%90%8D%E6%98%AF%E5%BA%94%E7%94%A8%E7%9A%84%E6%8A%A5%E5%90%8D%0A%0A%23%23%23%20%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98%0A1.%20%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%92%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%8C%E6%88%90%E5%A4%B1%E6%95%88%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%AF%8F%E4%B8%AA%E5%BA%94%E7%94%A8%E4%BC%9A%E5%8D%95%E7%8B%AC%E8%BF%90%E8%A1%8C%E5%9C%A8%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%EF%BC%8C%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E8%B0%83%E7%94%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E4%BC%9A%E4%BA%A7%E7%94%9F%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8B%B7%E8%B4%9D%0A2.%20%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E5%AE%8C%E5%85%A8%E5%A4%B1%E6%95%88%0A3.%20sharePreference%E5%8F%AF%E9%9D%A0%E6%80%A7%E4%B8%8B%E9%99%8D%EF%BC%8C%E4%B8%8D%E5%90%8C%E8%BF%9B%E7%A8%8B%E8%AF%BB%E5%86%99%E5%90%8C%E4%B8%80%E4%B8%AAsharePreference%E6%96%87%E4%BB%B6%E4%BC%9A%E5%87%BA%E9%94%99%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%B3%BB%E7%BB%9F%E5%AF%B9sharepreference%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E6%9C%89%E4%B8%80%E5%AE%9A%E7%9A%84%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%EF%BC%8C%E4%BC%9A%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%A4%87%E4%BB%BD%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E7%BC%93%E5%AD%98%E3%80%82%0A4.%20%E4%BC%9A%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AAapplication</center></body></html>